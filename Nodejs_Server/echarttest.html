<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>task1</title>
	<style>
		#main{
			width: 600px;
			height: 400px;
		}
	</style>
	<script src="echarts.js"></script>

</head>
<body>
	<div id="main"></div>

	<script>
 		
 		function status(response){
 		    if(response.status>=200 && response.status<300){
 		        return Promise.resolve(response);
 		    }
 		    else{
 		        return Promise.reject(new Error(response.statusText));
 		    }
 		}
 		function json(response){
 		    return response.json();
 		}
 		fetch("http://127.0.0.1:3000/tem")
 			.then(status)
 			.then(json)
 			.then(function(data){
 		    	// console.log("请求成功，JSON解析后的响应数据为:",data);
 		    	
 		    	myChart.setOption({
 		    	       
 		    	       series: [{
 		    	           // 根据名字对应到相应的系列
 		    	           name: '温度',
 		    	           data: data
 		    	       }]
 		    	   });
 			})
 			.catch(function(err){
 		    	console.log("Fetch错误:"+err);
 			});

 			fetch("http://127.0.0.1:3000/hum")
 				.then(status)
 				.then(json)
 				.then(function(data){
 			    	// console.log("请求成功，JSON解析后的响应数据为:",data);
 			    	myChart.setOption({
 			    	       series: [{
 			    	           // 根据名字对应到相应的系列
 			    	           name: '湿度',
 			    	           data: data
 			    	       }]
 			    	   });
 				})
 				.catch(function(err){
 			    	console.log("Fetch错误:"+err);
 				});


		//初始化echarts
		var myChart = echarts.init(document.getElementById('main'));

		//指定图表的配置项和数据
		var option ={
			title:{
				text:'温湿度'
			},
			tooltip:{},//提示框
			legend:{//图例组件
				data:['温度','湿度']
			},
			xAxis:{
				data:["1","2","3","4","最新"]
			},
			yAxis:{},
			series: [{
        		name: '温度',
       			type: 'line',
        		data: []
    		},{
    			name:"湿度",
    			type:'line',
    			data:[]
    		}]
		};

		//使用设置的配置项和数据显示图表
		myChart.setOption(option);
	</script>
</body>

</html>